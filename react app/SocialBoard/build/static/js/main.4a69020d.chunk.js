(this.webpackJsonpsocialboard=this.webpackJsonpsocialboard||[]).push([[0],{56:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(16),c=a.n(r),i=(a(64),a(27)),o=a(28),l=a(30),d=a(29),h=a(41),u=a(61),b=a(18),j=a(21),m=a(33);m.a.initializeApp({apiKey:"AIzaSyAovootqoYkPU3dgANlgTNdR4lO7kkPUMk",authDomain:"socialboard-b1a1e.firebaseapp.com",projectId:"socialboard-b1a1e",storageBucket:"socialboard-b1a1e.appspot.com",messagingSenderId:"1039428626533",appId:"1:1039428626533:web:a511a33d0f102fafaf7e8c",measurementId:"G-9Z8FDFRYNP"}),m.a.analytics();var p=m.a.auth,g=m.a.firestore(),O=m.a.database(),f=a(133),v=a(14),x=a.n(v),w=a(24);function S(e,t,a,n){return y.apply(this,arguments)}function y(){return(y=Object(w.a)(x.a.mark((function e(t,a,n,s){var r,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p().createUserWithEmailAndPassword(t,a);case 3:r=e.sent,m.a.firestore().collection("Users").doc("".concat(r.user.uid)).set({FirstName:n,LastName:s,Email:t,UserRole:"Customer",RegisteredOn:(new Date).toLocaleString()+""}),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),c=e.t0.code,i=e.t0.message,"auth/weak-password"===c?alert("The password is too weak."):alert(i),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function N(){return k.apply(this,arguments)}function k(){return(k=Object(w.a)(x.a.mark((function e(){var t,a,n,s,r,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p.GoogleAuthProvider,e.prev=1,e.next=4,p().signInWithPopup(t);case 4:a=e.sent,n=a.credential,n.accessToken,s=a.user,m.a.firestore().collection("Users").doc("".concat(s.uid)).set({FirstName:s.displayName,LastName:s.displayName,Email:s.email,UserRole:"Customer",RegisteredOn:(new Date).toLocaleString()+""}),e.next=20;break;case 12:e.prev=12,e.t0=e.catch(1),r=e.t0.code,console.log(r),c=e.t0.message,console.log(c),i=e.t0.credential,console.log(i);case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}a(56),a(66);var C=a(4);var I=function(){return Object(C.jsx)("header",{children:Object(C.jsxs)("nav",{className:"nav",children:[Object(C.jsx)("div",{className:"nav-item",children:Object(C.jsx)(j.b,{className:" nav-link",to:"/",children:"Social-App"})}),p().currentUser?Object(C.jsxs)("div",{className:"nav-item",children:[Object(C.jsx)(j.b,{className:"nav-item nav-link",to:"/boards",children:"Boards"}),Object(C.jsx)(f.a,{className:"nav-item nav-link",variant:"contained",onClick:function(){return p().signOut()},children:"Logout"})]}):Object(C.jsxs)("div",{className:"nav-item",children:[Object(C.jsx)(j.b,{className:"nav-item nav-link",to:"/login",children:"Log In"}),Object(C.jsx)(j.b,{className:"nav-item nav-link",to:"/signup",children:"Create New Account"})]})]})})};var E=function(){return Object(C.jsx)("footer",{className:"",children:Object(C.jsx)("div",{className:"",children:Object(C.jsx)("h3",{children:"\xa9 SocialBoard 2021 Made with \u2665 by Kenvin."})})})},M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(C.jsx)("div",{id:"login-page",children:Object(C.jsxs)("div",{id:"login-card",children:[Object(C.jsx)(I,{className:"App-header"}),Object(C.jsxs)("div",{style:{},children:[Object(C.jsx)("h1",{class:"form-element",children:"Welcome to SocialBoard \ud83d\ude00"}),Object(C.jsx)("h2",{class:"form-element",variant:"contained",color:"primary",children:"ChatBoards For The New Age !"}),Object(C.jsx)("div",{class:"form-element",children:Object(C.jsx)(j.b,{className:"btn btn-primary px-5 mr-3",to:"/signup",children:"Create New Account"})}),Object(C.jsx)("div",{class:"form-element",children:Object(C.jsx)(j.b,{className:"btn px-5",to:"/login",children:"Login to Your Account"})})]}),Object(C.jsx)(E,{})]})})}}]),a}(n.Component),D=a(23),R=a(142),U=a(71),B=a(140),A=a(137),L=a(138),F=a(139),P=a(141),_=Object(A.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper}}}));function T(e){var t=e.id,a=e.board_uid,s=e.board_name,r=e.boardImg,c=_(),i=Object(n.useState)(""),o=Object(U.a)(i,2);o[0],o[1];return console.log(t,s,r),Object(C.jsx)(L.a,{className:c.root,children:Object(C.jsxs)(F.a,{children:[Object(C.jsx)(B.a,{component:"img",alt:"board_image",height:"100",image:"https://source.unsplash.com/random",title:s}),Object(C.jsxs)(P.a,{children:[Object(C.jsx)("h1",{children:s}),Object(C.jsx)(j.b,{to:{pathname:"/chat/".concat(s),state:{board_name:s,board_uid:a}},children:"Click to Send Message in this Board "})]})]})})}var Y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:p().currentUser,boardClicked:"",boardlist:[],readError:null,writeError:null,loadingChats:!1,userRole:null,newboard:""},n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.myRef=s.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingChats:!0}),this.myRef.current,g.collection("Users").doc(this.state.user.uid).get().then((function(e){e.exists?(t.setState({userRole:e.data().UserRole}),console.log(t.state.userRole)):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}));try{g.collection("Boards").onSnapshot((function(e){var a=[];e.forEach((function(e){a.push(e.data())})),console.log(a),t.setState({boardlist:a})}))}catch(a){this.setState({readError:a.message,loadingChats:!1})}case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(this.state.message),this.setState({writeError:null}),e.prev=3,""!==this.state.newboard){e.next=6;break}throw"Board Name Cannot be empty";case 6:g.collection("Boards").add({boardImage:"set url manually",boardName:this.state.newboard,boardUid:""}),console.log("Board Created successfully"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0.message),this.setState({writeError:e.t0.message});case 14:this.setState({newboard:""});case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({newboard:e.target.value})}},{key:"formatTime",value:function(){var e=Object(w.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Date(t),n="".concat(a.getDate(),"/").concat(a.getMonth()+1,"/").concat(a.getFullYear()," ").concat(a.getHours(),":").concat(a.getMinutes()),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsx)("div",{id:"board-page",children:Object(C.jsxs)("div",{id:"board-card",children:[Object(C.jsx)(I,{}),Object(C.jsx)("div",{id:"board-list",children:this.state.boardlist.map((function(e,t){return Object(C.jsx)(T,{id:t,board_uid:e.boardUid,board_name:e.boardName,boardImg:e.boardImage},e.boardUid)}))}),Object(C.jsxs)("form",{onSubmit:this.handleSubmit,className:"Customer"===this.state.userRole?"customer-user":"admin-user",children:[Object(C.jsx)(R.a,{className:"form-element  input-field",label:"Enter Board Name...",name:"newboard",onChange:this.handleChange,value:this.state.newboard}),this.state.error?Object(C.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(C.jsx)(f.a,{variant:"contained",type:"submit",className:"btn btn-submit px-5 mt-4",children:"Create "})]}),Object(C.jsx)(E,{})]})})}}]),a}(n.Component),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:p().currentUser,board:"",chats:[],newMessage:"",readError:null,writeError:null,loadingPosts:!1,userRole:null,boardUid:""},n.handleChange=n.handleChange.bind(Object(D.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(D.a)(n)),n.myRef=s.a.createRef(),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(w.a)(x.a.mark((function e(){var t=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null,loadingChats:!0}),this.myRef.current;try{console.log(this.props.location.state.board_uid),O.ref("Chats").child(this.props.location.state.board_uid).child("Messages").on("value",(function(e){var a=[];e.forEach((function(e){a.push(e.val())})),t.setState({chats:a}),t.setState({loadingChats:!1})}))}catch(a){this.setState({readError:a.message,loadingChats:!1})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(this.state.message),this.setState({writeError:null}),e.prev=3,""!==this.state.message){e.next=6;break}throw"Message Cannot be empty";case 6:return e.next=8,O.ref("Chats").child(this.props.location.state.board_uid).child("Messages").push({message:this.state.newMessage,timestamp:Date.now(),senderID:this.state.user.uid,senderUserName:this.state.user.email.split("@")[0]});case 8:this.setState({newMessage:""}),console.log("Message sent successfully"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0.message),this.setState({writeError:e.t0.message});case 16:this.setState({message:""});case 17:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({newMessage:e.target.value})}},{key:"formatTime",value:function(e){var t=new Date(e);return"".concat(t.getDate(),"/").concat(t.getMonth()+1,"/").concat(t.getFullYear()," ").concat(t.getHours(),":").concat(t.getMinutes())}},{key:"render",value:function(){var e=this;return Object(C.jsx)("div",{id:"board-page",children:Object(C.jsxs)("div",{id:"board-card",children:[Object(C.jsx)(I,{}),Object(C.jsx)("div",{}),Object(C.jsxs)("h2",{children:[this.props.location.state.board_name," Board Messages"]}),Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"chat-area form-element-chatarea",ref:this.myRef,children:[this.state.loadingChats?Object(C.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(C.jsx)("span",{className:"sr-only",children:"Loading..."})}):"",this.state.chats.map((function(t){return Object(C.jsxs)("p",{className:"chat-bubble "+(e.state.user.uid===t.senderID?"current-user":""),children:[t.message,Object(C.jsx)("br",{}),Object(C.jsxs)("span",{className:"chat-time float-right",children:[e.formatTime(t.timestamp)," - ",t.senderUserName]})]},t.timestamp)}))]})}),Object(C.jsx)("br",{}),Object(C.jsx)("hr",{}),Object(C.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(C.jsx)(R.a,{className:"form-element input-field",label:"Type a Message... ",name:"newMessage",onChange:this.handleChange,value:this.state.newMessage}),this.state.error?Object(C.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(C.jsx)(f.a,{variant:"contained",type:"submit",className:"btn btn-submit",children:"Send "})]}),Object(C.jsx)("hr",{}),Object(C.jsx)(E,{})]})})}}]),a}(n.Component),W=a(42),z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={error:null,fname:"",lname:"",email:"",password:""},e.handleChange=e.handleChange.bind(Object(D.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(D.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(D.a)(e)),e}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,console.log("firstname signup",this.state.fname),e.next=6,S(this.state.email,this.state.password,this.state.fname,this.state.lname);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),this.setState({error:e.t0.message});case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsx)("div",{id:"login-page",children:Object(C.jsxs)("div",{id:"login-card",class:"signup-card",children:[Object(C.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("h1",{children:["Sign Up to",Object(C.jsx)(j.b,{className:"nav-link",to:"/",children:"SocialBoard"})]}),Object(C.jsx)("p",{className:"lead",children:"Fill in the form below to create an SocialBoard account."}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",name:"fname",placeholder:"First Name",onChange:this.handleChange,value:this.state.fname,type:"text"})}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",placeholder:"Last Name",name:"lname",onChange:this.handleChange,value:this.state.lname,type:"text"})}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",placeholder:"Email",name:"email",onChange:this.handleChange,value:this.state.email})}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})}),Object(C.jsxs)("div",{className:"form-element",children:[this.state.error?Object(C.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(C.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",children:"Sign up"})]}),Object(C.jsx)("p",{children:"You can also sign up with these social media apps"}),Object(C.jsx)(f.a,{variant:"contained",color:"secondary",onClick:this.googleSignIn,children:"Sign up with Google"}),Object(C.jsx)("hr",{}),Object(C.jsxs)("p",{children:["Already have an account? ",Object(C.jsx)(j.b,{to:"/login",children:"Login"})]})]}),Object(C.jsx)("hr",{}),Object(C.jsx)(E,{})]})})}}]),a}(n.Component),H=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(D.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(D.a)(e)),e.googleSignIn=e.googleSignIn.bind(Object(D.a)(e)),e}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(w.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,p().signInWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"googleSignIn",value:function(){var e=Object(w.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({error:e.t0.message});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(C.jsx)("div",{id:"login-page",children:Object(C.jsxs)("div",{id:"login-card",children:[Object(C.jsxs)("form",{className:"form",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(C.jsxs)("h1",{children:["Login to",Object(C.jsx)(j.b,{className:"nav-link",to:"/",children:"SocialBoard"})]}),Object(C.jsx)("p",{className:"lead",children:"Fill in the form below to login to your SocialBoard account."}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})}),Object(C.jsx)("div",{className:"form-element",children:Object(C.jsx)(R.a,{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})}),Object(C.jsxs)("div",{className:"form-element",children:[this.state.error?Object(C.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(C.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",children:"Login"})]}),Object(C.jsx)("p",{children:"You can also log in with these social media apps"}),Object(C.jsx)(f.a,{variant:"contained",color:"secondary",onClick:this.googleSignIn,children:"Sign in with Google"}),Object(C.jsx)("hr",{}),Object(C.jsxs)("p",{className:"form-element",children:["Don't have an account? ",Object(C.jsx)(j.b,{to:"/signup",children:"Sign up"})]})]}),Object(C.jsx)("hr",{}),Object(C.jsx)(E,{})]})})}}]),a}(n.Component),J=["component","authenticated"],K=["component","authenticated"];function q(e){var t=e.component,a=e.authenticated,n=Object(u.a)(e,J);return Object(C.jsx)(b.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return!0===a?Object(C.jsx)(t,Object(h.a)({},e)):Object(C.jsx)(b.a,{to:{pathname:"/",state:{from:e.location}}})}}))}function Z(e){var t=e.component,a=e.authenticated,n=Object(u.a)(e,K);return Object(C.jsx)(b.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return!1===a?Object(C.jsx)(t,Object(h.a)({},e)):Object(C.jsx)(b.a,{to:"/boards"})}}))}var Q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={authenticated:!1,loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;p().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading?Object(C.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(C.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(C.jsx)(j.a,{children:Object(C.jsxs)(b.d,{children:[Object(C.jsx)(b.b,{exact:!0,path:"/",component:M}),Object(C.jsx)(q,{path:"/boards",authenticated:this.state.authenticated,component:Y}),Object(C.jsx)(q,{path:"/chat/:board_name",authenticated:this.state.authenticated,component:G}),Object(C.jsx)(Z,{path:"/signup",authenticated:this.state.authenticated,component:z}),Object(C.jsx)(Z,{path:"/login",authenticated:this.state.authenticated,component:H})]})})}}]),a}(n.Component),V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,144)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(Q,{})}),document.getElementById("root")),V()}},[[99,1,2]]]);
//# sourceMappingURL=main.4a69020d.chunk.js.map